{"is_source_file": true, "format": "Kotlin", "description": "This file defines a ViewModel class for managing the state and behavior of a post-playback rating overlay in an Android application. It handles user interactions, countdown timers, and navigation logic related to the rating UI component.", "external_files": ["com.example.post_playback_rating_frontend.data.ServiceLocator", "kotlinx.coroutines.Job", "kotlinx.coroutines.delay", "kotlinx.coroutines.launch", "androidx.lifecycle.AndroidViewModel", "androidx.lifecycle.LiveData", "androidx.lifecycle.MutableLiveData"], "external_methods": ["ServiceLocator.contentRepository()", "ServiceLocator.metadataRepository()", "ServiceLocator.assetsRepository()", "ServiceLocator.ratingRepository()", "metadataRepo.getIndiceCopy()", "assetsRepo.getInstructionImages().mainPreview", "ratingRepo.setLike()"], "published": ["PostPlaybackRatingViewModel", "OverlayState", "onCreditsStart", "onPlaybackPositionChanged", "onDurationChanged", "onEndReached", "onClosePressed", "onLike", "onLove", "onDislike", "hideOverlay"], "classes": [{"name": "PostPlaybackRatingViewModel", "description": "A ViewModel managing the state and interactions of a post-playback rating overlay, including countdown timers, user ratings, and navigation triggers."}, {"name": "OverlayState", "description": "A sealed class representing various UI states of the overlay, such as hidden, loading, visible with countdown, auto-closing, closed, or navigation to vCard."}], "methods": [{"name": "onCreditsStart", "description": "Triggered when credits start; shows overlay if appropriate."}, {"name": "onPlaybackPositionChanged", "description": "Updates playback position; used to detect rewind events."}, {"name": "onDurationChanged", "description": "Updates the total duration of the content."}, {"name": "onEndReached", "description": "Indicates playback has reached the end."}, {"name": "onClosePressed", "description": "Handles user pressing the close button, closing the overlay."}, {"name": "onLike", "description": "Handles user selecting 'Like' rating."}, {"name": "onLove", "description": "Handles user selecting 'Love' rating."}, {"name": "onDislike", "description": "Handles user selecting 'Dislike' rating."}, {"name": "hideOverlay", "description": "Forces the overlay to hide, e.g., when navigating away."}], "calls": ["viewModelScope.launch", "ratingRepo.setLike", "delay", "ServiceLocator.contentRepository", "ServiceLocator.metadataRepository", "ServiceLocator.assetsRepository", "ServiceLocator.ratingRepository"], "search-terms": ["PostPlaybackRatingViewModel", "overlay countdown", "rating overlay", "post-playback UI", "credits start", "auto-close overlay", "rating interaction", "vCard navigation"], "state": 2, "file_id": 32, "knowledge_revision": 133, "git_revision": "5bfdd06a5106031bd12fb1327e62708b507f181c", "revision_history": [{"92": ""}, {"133": "5bfdd06a5106031bd12fb1327e62708b507f181c"}], "filename": "post_playback_rating_frontend/app/src/main/java/com/example/post_playback_rating_frontend/rating/PostPlaybackRatingViewModel.kt", "format-version": 4, "code-base-name": "https://github.com/DarssiniRamesh/post-playback-content-rating-screen-with-picture-in-picture-219315.git:kavia-main"}