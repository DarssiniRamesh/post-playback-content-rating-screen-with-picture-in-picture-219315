{"is_source_file": true, "format": "Kotlin", "description": "MainActivity for an Android TV app, manages UI flow, mock playback simulation, and rating overlay handling. Implements RatingOverlayHost, observes ViewModel state, and controls fragment navigation.", "external_files": ["R.layout.activity_main", "com.example.post_playback_rating_frontend.data.ServiceLocator", "com.example.post_playback_rating_frontend.rating.PostPlaybackRatingViewModel", "com.example.post_playback_rating_frontend.rating.RatingOverlayFragment", "com.example.post_playback_rating_frontend.rating.RatingOverlayHost", "com.example.post_playback_rating_frontend.ui.IndiceFragment", "android.os.Handler", "android.os.Looper", "android.util.Log", "android.view.KeyEvent", "androidx.activity.viewModels", "androidx.fragment.app.FragmentActivity", "androidx.lifecycle.Observer", "com.example.post_playback_rating_frontend.core.FeatureFlags"], "external_methods": ["com.example.post_playback_rating_frontend.data.ServiceLocator.useMocks()", "com.example.post_playback_rating_frontend.core.FeatureFlags.logMockModeIfEnabled()", "FragmentActivity.setContentView", "ComponentActivity.getSupportFragmentManager", "FragmentTransaction.replace", "FragmentTransaction.commitNow", "Handler.post", "RatingOverlayFragment.newInstance", "RatingOverlayFragment.show", "supportFragmentManager.findFragmentByTag", "RatingOverlayFragment.dismissAllowingStateLoss", "supportFragmentManager.popBackStack", "finish"], "published": ["showRatingOverlay", "navigateToVcard", "showEndPlayer"], "classes": [{"name": "MainActivity", "description": "Android TV main activity managing playback simulation, UI overlays, and navigation."}], "methods": [{"name": "onCreate", "description": "Initializes activity, sets layout, observes ViewModel, and starts mock playback if enabled."}, {"name": "observeRatingState", "description": "Sets observer on ViewModel state to update UI accordingly."}, {"name": "startMockPlayback", "description": "Simulates playback progress, triggers overlay events at specific timestamps."}, {"name": "onCreditsStart", "description": "Handles logic when credits start, informs ViewModel."}, {"name": "onKeyDown", "description": "Handles key events."}, {"name": "onBackPressed", "description": "Handles back navigation."}, {"name": "showRatingOverlay", "description": "Displays the rating overlay fragment."}, {"name": "navigateToVcard", "description": "Navigates to vCard or post rating details (stub)."}, {"name": "showEndPlayer", "description": "Returns to end player or main playback area (stub)."}], "calls": ["supportFragmentManager.beginTransaction().replace()", "supportFragmentManager.beginTransaction().commitNow()", "handler.post()", "ratingVm.onDurationChanged()", "ratingVm.onPlaybackPositionChanged()", "ratingVm.onCreditsStart()", "ratingVm.onEndReached()", "supportFragmentManager.findFragmentByTag()", "prev.dismissAllowingStateLoss()"], "search-terms": ["MainActivity", "rating overlay", "mock playback", "credits start trigger", "VCard navigation", "RatingOverlayFragment", "post_playback_rating_frontend"], "state": 2, "file_id": 5, "knowledge_revision": 214, "git_revision": "de8f2b846d59b2231617c5f56aca9d0d53c41fb5", "revision_history": [{"23": "9e62503ef32dede80b7dc75b63001351ab3f2afb"}, {"34": "9e62503ef32dede80b7dc75b63001351ab3f2afb"}, {"98": "f6040b07f1ebfff0b91916c49b756cc00ec43a4f"}, {"117": "5bfdd06a5106031bd12fb1327e62708b507f181c"}, {"173": "de8f2b846d59b2231617c5f56aca9d0d53c41fb5"}, {"214": "de8f2b846d59b2231617c5f56aca9d0d53c41fb5"}], "hash": "7d00b1586e123f690e496750356caa0c", "format-version": 4, "code-base-name": "post_playback_rating_frontend", "filename": "post_playback_rating_frontend/app/src/main/java/com/example/post_playback_rating_frontend/MainActivity.kt"}